# Лабораторная работа №2 

### Задание

Написать простейший "компилятор" на базе LLVM, который ничего на вход не берёт. Генерирует LLVM код для функции
```cpp
int main()
{
    return 353 + 48;
}
```

Простейший компилятор должен печатать LLVM-код на консоль

### Как запускать 

- Зависимости
```
sudo apt install llvm
sudo apt install clang
```
- Запуск

```
clang++ lab2.cpp `llvm-config --cxxflags --ldflags --system-libs --libs engine interpreter` -lffi
./a.out
```

### Про LLVM
LLVM (Low Level Virtual Machine) - это инфраструктура для разработки компиляторов, которая предоставляет набор модульных и повторно используемых компонентов для построения компиляторов для различных языков программирования.

### Что происходит в коде
```lab2_with_comments.cpp```
к вашим услугам. 
Общий процесс выполнения:

Процесс выполнения:

1) Подключаются необходимые заголовочные файлы LLVM и стандартной библиотеки C++.

2) Создается контекст LLVM (LLVMContext), который управляет различными объектами LLVM.

3) Создается новый модуль LLVM с именем "gen-opt-lab2" в контексте.

4) Создается IRBuilder для генерации LLVM IR.

5) Создается тип функции funcType, которая возвращает 32-битное целое число и не имеет аргументов.

6) Создается функция "main" с внешним связыванием, используя funcType.

7) Создается базовый блок "entrypoint" внутри функции "main".

8) Устанавливается текущая точка вставки в базовый блок "entrypoint".

9) Создаются две константы типа i32: a_const со значением 140 и b_const со значением 67.

10) Создается инструкция сложения констант a_const и b_const, результат сохраняется в return_value.

11) Создается инструкция возврата значения return_value.

12) Сгенерированный LLVM IR выводится на стандартный вывод с помощью module->dump().

13) Освобождается память, занятая модулем.

14) Программа завершается с кодом возврата 0.