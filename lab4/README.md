## Лабораторная №4

### Задание

хз, не сформулировали

### Как запускать

```bash
sudo chmod 755 build.sh
./build.sh
./compiler program.txt > output.txt
```

### Че происходит

В лабе надо сделать че то похожее на первую, но со своим языком. Значит, пишем грамматику. В папке Lexer - всё для лексического анализа, в Parser - для синтаксического.



Общий порядок:

- Лекс анализ, синт анализ - парсит в аст дерево
- Аст дерево -> CFG граф
- Вычисление множеств доминаторов для всех вершин
- Алгоритм для вычисления дерева доминаторов (вычисляет intermidiate dominator, строит дерево)
- Юзая это дерево и мн-во доминаторов строим фронты для каждого узла
- Алгоритм вставки фи-функций:
    - Для каждой переменной находим все вершины где она присваивается (по CFG) - мн-во S
    - Находим фронт мно-ва S - мн-во DF(S) - объединение всех фронтов вершин из S
    - Для него снова находим DF-ы пока не перестанет изменяться 
    - Когда закончим, имеем мн-во DF+(S)
    - Вставляем во все элементы DF+(S) фи-функции (пустые)
- Переименование переменной
    - Проходимся DFS по дереву доминаторов
    - Есть стек номер последней версии переменной, в очередном блоке во всех правых частях инструкций переименовываем a в этот номер с верщины стека
    - Когда видим присваивание, создаем новую версию, кладем на стек, увеличиваем счетчик


idom - строгий доминатор, доминируемый всеми другими доминаторами этой вершины (самый близкий)

dominance frontier (фронт доминации) - мн-во всех вершин, что эта вершина не доминирует над ними, но доминирует над предшественником этих вершин в CFG, при этом она может быть этим предшественником.
